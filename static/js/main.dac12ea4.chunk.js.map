{"version":3,"sources":["api/buy-bch.api.js","components/intl-wrapper/intl-wrapper.component.jsx","components/header/header.component.jsx","components/custom-button/custom-button.component.jsx","components/form-input/form-input.component.jsx","components/qr-scanner/qr-scanner.component.jsx","components/spinner/spinner.component.jsx","util/util.js","components/form-container/form-container.component.jsx","components/new-order/new-order.component.jsx","components/payment-pending/payment-pending.component.jsx","components/phone-verification/phone-verification.component.jsx","components/photo-verification/photo-verification.component.jsx","App.js","reportWebVitals.js","index.js"],"names":["backendUrl","process","getRate","bgnAmount","a","axios","get","response","data","errorId","getOrder","orderId","newOrder","bchAddress","email","post","bgn_amount","bch_addr","order","errorIdFromErrorForStatus","verifyPhone","phone","verifyPhoneCode","secretCode","secret_code","verifyPhoto","photo","photoUrl","headers","type","err","statusCode","customErrorId","status","Context","React","createContext","messagesFromLocal","locale","test","Bulgarian","English","currentLocale","navigator","language","IntlWrapper","props","useState","setLocale","messages","setMessages","Provider","value","selectLanguage","newLocale","children","Header","context","useContext","className","onClick","CustomButton","color","inverted","otherProps","FormInput","handleChange","label","shrink","onChange","length","QrScanner","setBchState","setBchAddress","errorMessage","setErrorMessage","intl","useIntl","setBchAddressAndReturn","e","preventDefault","showQr","formatMessage","id","delay","onError","error","onScan","style","margin","Spinner","resetOrder","localStorage","clear","window","location","reload","FormContainer","WrappedForm","loading","setLoading","amount","setOrder","bgn","setBgn","setEmail","bchState","bch","setBch","didMount","useRef","useEffect","current","timeOutId","setTimeout","bchAmount","clearTimeout","handleSubmit","event","setItem","checkbox","name","textId","urlToRender","required","url","href","onSubmit","target","step","max","min","toString","readOnly","PaymentPending","paymentUrl","useReducer","x","forceUpdate","open","getItem","setPhone","validationCode","setValidationCode","codeSent","setCodeSent","storedPhone","removeItem","photoSuffix","declarationFormUrl","setPhoto","key","setKey","files","img","accept","alt","src","URL","createObjectURL","App","retrievedOrder","fetchOrder","renderSwitch","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dac12ea4.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst backendUrl = process.env.REACT_APP_BACKEND_URL;\n\nexport const getRate = async (bgnAmount) => {\n  try {\n    const response = await axios.get(\n      `${backendUrl}/rate/bchbgn?amount_bgn=${bgnAmount}`\n    );\n    return response.data[\"amount_bch\"];\n  } catch (err) {\n    return { errorId: \"bchapi.error.general\" };\n  }\n};\n\nexport const getOrder = async (orderId) => {\n  try {\n    const response = await axios.get(`${backendUrl}/order/${orderId}`);\n    return response.data;\n  } catch (err) {\n    return { errorId: \"bchapi.error.general\" };\n  }\n};\n\nexport const newOrder = async (bgnAmount, bchAddress, email) => {\n  try {\n    const response = await axios.post(`${backendUrl}/order`, {\n      bgn_amount: bgnAmount,\n      bch_addr: bchAddress,\n      email,\n    });\n    return { order: response.data };\n  } catch (err) {\n    return errorIdFromErrorForStatus(err, 503, \"bchapi.error.notEnoughBch\");\n  }\n};\n\nexport const verifyPhone = async (orderId, phone) => {\n  try {\n    await axios.post(`${backendUrl}/order/${orderId}/id/phone`, {\n      phone,\n    });\n  } catch (err) {\n    return errorIdFromErrorForStatus(err, 400, \"bchapi.error.phoneNumber\");\n  }\n};\n\nexport const verifyPhoneCode = async (orderId, phone, secretCode) => {\n  try {\n    const response = await axios.post(\n      `${backendUrl}/order/${orderId}/id/phone`,\n      {\n        phone,\n        secret_code: secretCode,\n      }\n    );\n    return { order: response.data };\n  } catch (err) {\n    return errorIdFromErrorForStatus(err, 403, \"bchapi.error.validationCode\");\n  }\n};\n\nexport const verifyPhoto = async (orderId, photo, photoUrl) => {\n  try {\n    const response = await axios.post(\n      `${backendUrl}/order/${orderId}/id/${photoUrl}`,\n      photo,\n      {\n        headers: {\n          \"Content-Type\": photo.type,\n        },\n      }\n    );\n    return { order: response.data };\n  } catch (err) {\n    return errorIdFromErrorForStatus(err, 400, \"bchapi.error.photoFormat\");\n  }\n};\n\nconst errorIdFromErrorForStatus = (err, statusCode, customErrorId) => {\n  let errorId;\n  if (err.response && err.response.status === statusCode) {\n    errorId = customErrorId;\n  } else {\n    errorId = \"bchapi.error.general\";\n  }\n  return { errorId };\n};\n","import React, { useState } from \"react\";\nimport { IntlProvider } from \"react-intl\";\nimport Bulgarian from \"../../lang/bg.json\";\nimport English from \"../../lang/en.json\";\n\nexport const Context = React.createContext();\n\nconst messagesFromLocal = (locale) => {\n  return /^bg\\b/.test(locale) ? Bulgarian : English;\n};\n\nconst currentLocale = navigator.language;\n\nconst IntlWrapper = (props) => {\n  const [locale, setLocale] = useState(currentLocale);\n  const [messages, setMessages] = useState(messagesFromLocal(currentLocale));\n\n  function selectLanguage(newLocale) {\n    setLocale(newLocale);\n    setMessages(messagesFromLocal(newLocale));\n  }\n\n  return (\n    <Context.Provider value={{ locale, selectLanguage }}>\n      <IntlProvider messages={messages} locale={locale}>\n        {props.children}\n      </IntlProvider>\n    </Context.Provider>\n  );\n};\n\nexport default IntlWrapper;\n","import React, { useContext } from \"react\";\nimport \"./header.styles.scss\";\nimport { Context } from \"../intl-wrapper/intl-wrapper.component\";\n\nconst Header = () => {\n  const context = useContext(Context);\n\n  return (\n    <div className=\"header-container\">\n      <div className=\"options-container\">\n        <div className=\"option\" onClick={() => context.selectLanguage(\"bg-BG\")}>\n          Български\n        </div>\n        <div className=\"option\" onClick={() => context.selectLanguage(\"en\")}>\n          English\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\n\nimport \"./custom-buttom.styles.scss\";\n\nconst CustomButton = ({ children, inverted, color, ...otherProps }) => (\n  <button\n    className={color ? \"custom-button-\" + color : \"custom-button\"}\n    {...otherProps}\n  >\n    {children}\n  </button>\n);\n\nexport default CustomButton;\n","import React from \"react\";\n\nimport \"./form-input.styles.scss\";\n\nconst FormInput = ({\n  handleChange,\n  label,\n  shrink,\n  children,\n  ...otherProps\n}) => (\n  <div className=\"group\">\n    <input className=\"form-input\" onChange={handleChange} {...otherProps} />\n    {label ? (\n      <label\n        className={`${\n          otherProps.value.length ? \"shrink\" : \"\"\n        } form-input-label`}\n      >\n        {label}\n      </label>\n    ) : null}\n    {children}\n  </div>\n);\n\nexport default FormInput;\n","import React, { useState } from \"react\";\n\nimport CustomButton from \"../custom-button/custom-button.component\";\n\nimport { useIntl } from \"react-intl\";\nimport QrReader from \"react-qr-reader\";\n\nimport \"../form.styles.scss\";\n\nfunction QrScanner({ setBchState }) {\n  const [bchAddress, setBchAddress] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const intl = useIntl();\n\n  const setBchAddressAndReturn = (e) => {\n    e.preventDefault();\n    setBchState({ bchAddress: bchAddress ? bchAddress : \"\", showQr: false });\n  };\n\n  return (\n    <div className=\"form-container\">\n      {bchAddress ? (\n        <div>\n          <p>{intl.formatMessage({ id: \"qrScanner.confirmationMessage\" })}</p>\n          <p>{bchAddress}</p>\n          <div className=\"buttons\">\n            <CustomButton color=\"green\" onClick={setBchAddressAndReturn}>\n              {intl.formatMessage({ id: \"qrScanner.submit\" })}\n            </CustomButton>\n            <CustomButton\n              color=\"red\"\n              onClick={(e) => {\n                e.preventDefault();\n                setBchAddress(\"\");\n              }}\n            >\n              {intl.formatMessage({ id: \"qrScanner.scanAgain\" })}\n            </CustomButton>\n          </div>\n        </div>\n      ) : (\n        <div>\n          <QrReader\n            delay={300}\n            onError={(error) => setErrorMessage(error)}\n            onScan={(data) => setBchAddress(data)}\n            style={{ margin: \"10px 0px\" }}\n          />\n          <CustomButton color=\"red\" onClick={setBchAddressAndReturn}>\n            {intl.formatMessage({ id: \"qrScanner.back\" })}\n          </CustomButton>\n        </div>\n      )}\n      {errorMessage ? <p className=\"error-message\">{errorMessage}</p> : null}\n    </div>\n  );\n}\n\nexport default QrScanner;\n","import React from \"react\";\n\nimport \"./spinner.styles.scss\";\n\nconst Spinner = () => (\n  <div className=\"spinner-overlay\">\n    <div className=\"spinner-container\" />\n  </div>\n);\n\nexport default Spinner;\n","export const resetOrder = () => {\n  localStorage.clear();\n  window.location.reload();\n};\n","import React, { useState } from \"react\";\n\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport Spinner from \"../spinner/spinner.component\";\nimport { resetOrder } from \"../../util/util\";\n\nimport { useIntl } from \"react-intl\";\n\nconst FormContainer = (WrappedForm) =>\n  function Wrapper({ children, ...props }) {\n    const [errorMessage, setErrorMessage] = useState(\"\");\n    const [loading, setLoading] = useState(false);\n\n    const intl = useIntl();\n\n    if (loading) {\n      return <Spinner />;\n    }\n\n    return (\n      <div className=\"form-container\">\n        <WrappedForm\n          setErrorMessage={(errorId) => {\n            errorId\n              ? setErrorMessage(intl.formatMessage({ id: errorId }))\n              : setErrorMessage(\"\");\n          }}\n          setLoading={setLoading}\n          {...props}\n        >\n          {children}\n        </WrappedForm>\n        {props.bgnAmount ? (\n          <p>\n            {intl.formatMessage(\n              { id: \"currentOrder.amount\" },\n              { amount: props.bgnAmount }\n            )}\n            <CustomButton className=\"small-button\" onClick={resetOrder}>\n              {intl.formatMessage({ id: \"currentOrder.reset\" })}\n            </CustomButton>\n          </p>\n        ) : null}\n        {errorMessage ? <p className=\"error-message\">{errorMessage}</p> : null}\n      </div>\n    );\n  };\nexport default FormContainer;\n","import React, { useEffect, useState, useRef } from \"react\";\n\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport FormInput from \"../form-input/form-input.component\";\nimport QrScanner from \"../qr-scanner/qr-scanner.component\";\nimport FormContainer from \"../form-container/form-container.component\";\n\nimport { newOrder, getRate } from \"../../api/buy-bch.api\";\n\nimport { useIntl } from \"react-intl\";\n\nimport \"../form.styles.scss\";\nimport \"./new-order.styles.scss\";\n\nfunction NewOrder({ setOrder, setErrorMessage, setLoading }) {\n  const [bgn, setBgn] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [bchState, setBchState] = useState({\n    bchAddress: \"\",\n    showQr: false,\n  });\n  const [bch, setBch] = useState(\"\");\n\n  const didMount = useRef(false);\n\n  const intl = useIntl();\n\n  useEffect(() => {\n    if (didMount.current) {\n      const timeOutId = setTimeout(async () => {\n        const bchAmount = await getRate(bgn);\n        setBch(bchAmount);\n      }, 1000);\n      return () => clearTimeout(timeOutId);\n    } else {\n      didMount.current = true;\n    }\n  }, [bgn]);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setLoading(true);\n    const response = await newOrder(bgn, bchState.bchAddress, email);\n    setLoading(false);\n    if (response.order) {\n      localStorage.setItem(\"orderId\", response.order.id);\n      setOrder(response.order);\n    } else if (response.errorId) {\n      setErrorMessage(response.errorId);\n    }\n  };\n\n  const handleChangeEmail = (event) => {\n    setEmail(event.target.value);\n  };\n\n  const handleChangeBchAddress = (event) => {\n    setBchState({ ...bchState, bchAddress: event.target.value });\n  };\n\n  const handleChangeBgn = (event) => {\n    setBgn(event.target.value);\n  };\n\n  if (bchState.showQr) {\n    return <QrScanner setBchState={setBchState} />;\n  }\n\n  const checkbox = (name, textId, urlToRender) => {\n    return (\n      <div className=\"group checkbox\">\n        <input type=\"checkbox\" required name={name} />\n        <label>\n          {intl.formatMessage(\n            {\n              id: textId,\n            },\n            {\n              a: (url) => <a href={urlToRender}>{url}</a>,\n            }\n          )}\n        </label>\n      </div>\n    );\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <FormInput\n          name=\"email\"\n          type=\"email\"\n          handleChange={handleChangeEmail}\n          value={email}\n          label={intl.formatMessage({ id: \"order.email\" })}\n          required\n        />\n        <FormInput\n          name=\"bchAddress\"\n          type=\"bchAddress\"\n          handleChange={handleChangeBchAddress}\n          value={bchState.bchAddress}\n          label={intl.formatMessage({ id: \"order.bchAddress\" })}\n          required\n          children={\n            <CustomButton\n              className=\"small-button\"\n              onClick={(e) => {\n                e.preventDefault();\n                setBchState({ ...bchState, showQr: true });\n              }}\n            >\n              {intl.formatMessage({ id: \"order.scanQr\" })}\n            </CustomButton>\n          }\n        />\n        <FormInput\n          name=\"bgn\"\n          type=\"number\"\n          step=\"any\"\n          handleChange={handleChangeBgn}\n          value={bgn}\n          label={intl.formatMessage({ id: \"order.bgnAmount\" })}\n          required\n          max={process.env.REACT_APP_MAX_BGN_AMOUNT}\n          min={process.env.REACT_APP_MIN_BGN_AMOUNT}\n        />\n        <FormInput\n          name=\"bch\"\n          type=\"text\"\n          value={bch ? bch.toString() : \"\"}\n          label={intl.formatMessage({ id: \"order.bchAmount\" })}\n          readOnly\n        />\n        {checkbox(\n          \"termsConditions\",\n          \"order.termAndConditions\",\n          process.env.REACT_APP_TERMS_AND_CONDITIONS_URL\n        )}\n        {checkbox(\n          \"exchangeRateTerms\",\n          \"order.exchangeRateTerms\",\n          process.env.REACT_APP_EXCHANGE_RATE_TERMS_URL\n        )}\n\n        <div className=\"buttons\">\n          <CustomButton type=\"submit\">\n            {intl.formatMessage({ id: \"order.buyButton\" })}\n          </CustomButton>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default FormContainer(NewOrder);\n","import React, { useReducer } from \"react\";\n\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport { useIntl } from \"react-intl\";\nimport { resetOrder } from \"../../util/util\";\n\nimport \"./payment-pending.styles.scss\";\nimport \"../form.styles.scss\";\n\nconst PaymentPending = ({ paymentUrl, bgnAmount }) => {\n  const [, forceUpdate] = useReducer((x) => (x === 0 ? x + 1 : x - 1), 0);\n\n  const intl = useIntl();\n\n  const payHere = () => {\n    window.open(paymentUrl, \"_blank\");\n    localStorage.setItem(\"new-order-button-visible\", true);\n    setTimeout(forceUpdate, 1000);\n  };\n\n  return (\n    <div className=\"form-container\">\n      {bgnAmount ? (\n        <p>\n          {intl.formatMessage(\n            { id: \"currentOrder.amount\" },\n            { amount: bgnAmount }\n          )}\n        </p>\n      ) : null}\n      <p>{intl.formatMessage({ id: \"payment.thankYou\" })}</p>\n      <div className=\"buttons\">\n        <CustomButton onClick={payHere}>\n          {intl.formatMessage({ id: \"payment.payHere\" })}\n        </CustomButton>\n        {localStorage.getItem(\"new-order-button-visible\") ? (\n          <CustomButton onClick={resetOrder}>\n            {intl.formatMessage({ id: \"payment.newOrder\" })}\n          </CustomButton>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentPending;\n","import React, { useState, useEffect } from \"react\";\n\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport FormInput from \"../form-input/form-input.component\";\nimport FormContainer from \"../form-container/form-container.component\";\n\nimport { verifyPhone, verifyPhoneCode } from \"../../api/buy-bch.api\";\n\nimport { useIntl } from \"react-intl\";\n\nimport \"../form.styles.scss\";\n\nfunction PhoneVerification({ orderId, setOrder, setErrorMessage, setLoading }) {\n  const [phone, setPhone] = useState(\"\");\n  const [validationCode, setValidationCode] = useState(\"\");\n  const [codeSent, setCodeSent] = useState(false);\n\n  const intl = useIntl();\n\n  useEffect(() => {\n    let storedPhone = localStorage.getItem(\"phone\");\n    if (storedPhone) {\n      setPhone(storedPhone);\n      setCodeSent(true);\n    }\n  }, []);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setErrorMessage(\"\");\n    setLoading(true);\n    if (codeSent) {\n      const response = await verifyPhoneCode(orderId, phone, validationCode);\n      if (response.order) {\n        setOrder(response.order);\n        localStorage.removeItem(\"phone\");\n      } else if (response.errorId) {\n        setErrorMessage(response.errorId);\n        setLoading(false);\n      }\n    } else {\n      const response = await verifyPhone(orderId, phone);\n      if (response) {\n        setErrorMessage(response.errorId);\n      } else {\n        localStorage.setItem(\"phone\", phone);\n      }\n      setLoading(false);\n    }\n  };\n\n  const handlePhoneChange = (event) => {\n    setPhone(event.target.value);\n  };\n\n  const handleValidationCodeChange = (event) => {\n    setValidationCode(event.target.value);\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <FormInput\n          name=\"phoneNumber\"\n          type=\"text\"\n          handleChange={handlePhoneChange}\n          value={phone}\n          label={intl.formatMessage({ id: \"phone.number\" })}\n          required\n        />\n        {codeSent ? (\n          <FormInput\n            name=\"validationCode\"\n            type=\"text\"\n            handleChange={handleValidationCodeChange}\n            value={validationCode}\n            label={intl.formatMessage({ id: \"phone.smsCode\" })}\n            required\n          />\n        ) : null}\n        <div className=\"buttons\">\n          <CustomButton type=\"submit\">\n            {intl.formatMessage({ id: \"phone.submit\" })}\n          </CustomButton>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default FormContainer(PhoneVerification);\n","import React, { useState } from \"react\";\n\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport FormInput from \"../form-input/form-input.component\";\nimport FormContainer from \"../form-container/form-container.component\";\n\nimport { verifyPhoto } from \"../../api/buy-bch.api\";\n\nimport { useIntl } from \"react-intl\";\n\nimport \"../form.styles.scss\";\nimport \"./photo-verification.styles.scss\";\n\nfunction PhotoVerification({\n  orderId,\n  setOrder,\n  photoSuffix,\n  declarationFormUrl,\n  setErrorMessage,\n  setLoading,\n}) {\n  const [photo, setPhoto] = useState(null);\n  const [key, setKey] = useState(0);\n\n  const intl = useIntl();\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setErrorMessage(\"\");\n    setLoading(true);\n    const response = await verifyPhoto(orderId, photo, photoSuffix);\n    setLoading(false);\n    if (response.order) {\n      setPhoto(null);\n      setKey(key === 0 ? 1 + key : key - 1);\n      setOrder(response.order);\n    } else if (response.errorId) {\n      setErrorMessage(response.errorId);\n    }\n  };\n\n  const handleChange = (event) => {\n    if (event.target.files && event.target.files[0]) {\n      let img = event.target.files[0];\n      setPhoto(img);\n    }\n  };\n\n  const photoMessageId = () => {\n    if (photoSuffix === \"id_photo\") {\n      return \"photo.typeId\";\n    } else if (photoSuffix === \"face_photo\") {\n      return \"photo.typeFace\";\n    } else if (photoSuffix === \"declaration_form\") {\n      return \"photo.typeDeclaration\";\n    }\n  };\n\n  return (\n    <div>\n      <p>{intl.formatMessage({ id: photoMessageId() })}</p>\n      <form onSubmit={handleSubmit}>\n        <FormInput\n          name=\"photo\"\n          type=\"file\"\n          handleChange={handleChange}\n          required\n          key={key}\n          accept=\"image/*\"\n        />\n        {photo ? (\n          <img alt=\"To upload\" src={URL.createObjectURL(photo)} />\n        ) : null}\n        {declarationFormUrl ? (\n          <p>\n            {intl.formatMessage(\n              {\n                id: \"photo.declarationUrl\",\n              },\n              {\n                a: (url) => <a href={declarationFormUrl}>{url}</a>,\n              }\n            )}\n          </p>\n        ) : null}\n        <div className=\"buttons\">\n          <CustomButton type=\"submit\">\n            {intl.formatMessage({ id: \"photo.upload\" })}\n          </CustomButton>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default FormContainer(PhotoVerification);\n","import { useEffect, useState } from \"react\";\n\nimport { getOrder } from \"./api/buy-bch.api\";\n\nimport \"./App.scss\";\nimport Header from \"./components/header/header.component\";\nimport NewOrder from \"./components/new-order/new-order.component\";\nimport PaymentPending from \"./components/payment-pending/payment-pending.component\";\nimport PhoneVerification from \"./components/phone-verification/phone-verification.component\";\nimport PhotoVerification from \"./components/photo-verification/photo-verification.component\";\n\nfunction App() {\n  const [order, setOrder] = useState({});\n\n  useEffect(() => {\n    const orderId = localStorage.getItem(\"orderId\");\n    if (orderId) {\n      async function fetchOrder() {\n        const retrievedOrder = await getOrder(orderId);\n        setOrder(retrievedOrder);\n      }\n\n      fetchOrder();\n    }\n  }, []);\n\n  const renderSwitch = () => {\n    if (order[\"status\"] === \"pending_payment\") {\n      return (\n        <PaymentPending\n          paymentUrl={order[\"payment_url\"]}\n          bgnAmount={order[\"bgn_amount\"]}\n        />\n      );\n    }\n\n    if (order[\"status\"] === \"pending_id\") {\n      if (order[\"id_pending\"] === \"phone\") {\n        return (\n          <PhoneVerification\n            orderId={order[\"id\"]}\n            setOrder={setOrder}\n            bgnAmount={order[\"bgn_amount\"]}\n          />\n        );\n      } else if (\n        order[\"id_pending\"] === \"id_photo\" ||\n        order[\"id_pending\"] === \"face_photo\" ||\n        order[\"id_pending\"] === \"declaration_form\"\n      ) {\n        return (\n          <PhotoVerification\n            orderId={order[\"id\"]}\n            setOrder={setOrder}\n            photoSuffix={order[\"id_pending\"]}\n            declarationFormUrl={order[\"id_ext_url\"]}\n            bgnAmount={order[\"bgn_amount\"]}\n          />\n        );\n      }\n    }\n    return <NewOrder setOrder={setOrder} />;\n  };\n\n  return (\n    <div className=\"App\">\n      <Header />\n      {renderSwitch()}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport IntlWrapper from \"./components/intl-wrapper/intl-wrapper.component\";\n\nReactDOM.render(\n  <IntlWrapper>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </IntlWrapper>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}