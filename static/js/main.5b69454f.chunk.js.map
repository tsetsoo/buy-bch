{"version":3,"sources":["api/buy-bch.api.js","components/intl-wrapper/intl-wrapper.component.jsx","components/header/header.component.jsx","components/custom-button/custom-button.component.jsx","components/form-input/form-input.component.jsx","components/spinner/spinner.component.jsx","components/qr-scanner/qr-scanner.component.jsx","components/new-order/new-order.component.jsx","components/payment-pending/payment-pending.component.jsx","components/phone-verification/phone-verification.component.jsx","components/photo-verification/photo-verification.component.jsx","App.js","reportWebVitals.js","index.js"],"names":["backendUrl","process","getRate","bgnAmount","a","axios","get","response","data","errorId","getOrder","orderId","newOrder","bchAddress","email","post","bgn_amount","bch_addr","order","errorIdFromErrorForStatus","verifyPhone","phone","verifyPhoneCode","secretCode","secret_code","verifyPhoto","photo","photoUrl","headers","type","err","statusCode","customErrorId","status","Context","React","createContext","messagesFromLocal","locale","test","Bulgarian","English","currentLocale","navigator","language","IntlWrapper","props","useState","setLocale","messages","setMessages","Provider","value","selectLanguage","newLocale","children","Header","context","useContext","className","onClick","CustomButton","otherProps","inverted","FormInput","handleChange","label","shrink","onChange","length","Spinner","QrScanner","setBchState","setBchAddress","errorMessage","setErrorMessage","intl","useIntl","formatMessage","id","e","preventDefault","showQr","delay","onError","error","onScan","NewOrder","setOrder","bgn","setBgn","setEmail","bchState","bch","setBch","loading","setLoading","didMount","useRef","useEffect","current","timeOutId","setTimeout","bchAmount","clearTimeout","handleSubmit","event","localStorage","setItem","onSubmit","name","target","required","step","max","min","toString","readOnly","url","href","PaymentPending","paymentUrl","useReducer","x","forceUpdate","window","open","getItem","clear","location","reload","PhoneVerification","setPhone","validationCode","setValidationCode","codeSent","setCodeSent","PhotoVerification","photoSuffix","declarationFormUrl","setPhoto","key","setKey","files","img","alt","src","URL","createObjectURL","App","retrievedOrder","console","log","fetchOrder","renderSwitch","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5b69454f.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst backendUrl = process.env.REACT_APP_BACKEND_URL;\n\nexport const getRate = async (bgnAmount) => {\n  try {\n    const response = await axios.get(\n      `${backendUrl}/rate/bchbgn?amount_bgn=${bgnAmount}`\n    );\n    return response.data[\"amount_bch\"];\n  } catch (err) {\n    return { errorId: \"bchapi.error.general\" };\n  }\n};\n\nexport const getOrder = async (orderId) => {\n  try {\n    const response = await axios.get(`${backendUrl}/order/${orderId}`);\n    return response.data;\n  } catch (err) {\n    return { errorId: \"bchapi.error.general\" };\n  }\n};\n\nexport const newOrder = async (bgnAmount, bchAddress, email) => {\n  try {\n    const response = await axios.post(`${backendUrl}/order`, {\n      bgn_amount: bgnAmount,\n      bch_addr: bchAddress,\n      email,\n    });\n    return { order: response.data };\n  } catch (err) {\n    return errorIdFromErrorForStatus(err, 503, \"bchapi.error.notEnoughBch\");\n  }\n};\n\nexport const verifyPhone = async (orderId, phone) => {\n  try {\n    await axios.post(`${backendUrl}/order/${orderId}/id/phone`, {\n      phone,\n    });\n  } catch (err) {\n    return errorIdFromErrorForStatus(err, 400, \"bchapi.error.phoneNumber\");\n  }\n};\n\nexport const verifyPhoneCode = async (orderId, phone, secretCode) => {\n  try {\n    const response = await axios.post(\n      `${backendUrl}/order/${orderId}/id/phone`,\n      {\n        phone,\n        secret_code: secretCode,\n      }\n    );\n    return { order: response.data };\n  } catch (err) {\n    return errorIdFromErrorForStatus(err, 403, \"bchapi.error.validationCode\");\n  }\n};\n\nexport const verifyPhoto = async (orderId, photo, photoUrl) => {\n  try {\n    const response = await axios.post(\n      `${backendUrl}/order/${orderId}/id/${photoUrl}`,\n      photo,\n      {\n        headers: {\n          \"Content-Type\": photo.type,\n        },\n      }\n    );\n    return { order: response.data };\n  } catch (err) {\n    return errorIdFromErrorForStatus(err, 400, \"bchapi.error.photoFormat\");\n  }\n};\n\nconst errorIdFromErrorForStatus = (err, statusCode, customErrorId) => {\n  let errorId;\n  if (err.response && err.response.status === statusCode) {\n    errorId = customErrorId;\n  } else {\n    errorId = \"bchapi.error.general\";\n  }\n  return { errorId };\n};\n","import React, { useState } from \"react\";\nimport { IntlProvider } from \"react-intl\";\nimport Bulgarian from \"../../lang/bg.json\";\nimport English from \"../../lang/en.json\";\n\nexport const Context = React.createContext();\n\nconst messagesFromLocal = (locale) => {\n  return /^bg\\b/.test(locale) ? Bulgarian : English;\n};\n\nconst currentLocale = navigator.language;\n\nconst IntlWrapper = (props) => {\n  const [locale, setLocale] = useState(currentLocale);\n  const [messages, setMessages] = useState(messagesFromLocal(currentLocale));\n\n  function selectLanguage(newLocale) {\n    setLocale(newLocale);\n    setMessages(messagesFromLocal(newLocale));\n  }\n\n  return (\n    <Context.Provider value={{ locale, selectLanguage }}>\n      <IntlProvider messages={messages} locale={locale}>\n        {props.children}\n      </IntlProvider>\n    </Context.Provider>\n  );\n};\n\nexport default IntlWrapper;\n","import React, { useContext } from \"react\";\nimport \"./header.styles.scss\";\nimport { Context } from \"../intl-wrapper/intl-wrapper.component\";\n\nconst Header = () => {\n  const context = useContext(Context);\n\n  return (\n    <div className=\"header-container\">\n      <div className=\"options-container\">\n        <div className=\"option\" onClick={() => context.selectLanguage(\"bg-BG\")}>\n          Български\n        </div>\n        <div className=\"option\" onClick={() => context.selectLanguage(\"en\")}>\n          English\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\n\nimport \"./custom-buttom.styles.scss\";\n\nconst CustomButton = ({ children, inverted, ...otherProps }) => (\n  <button className=\"custom-button\" {...otherProps}>\n    {children}\n  </button>\n);\n\nexport default CustomButton;\n","import React from \"react\";\n\nimport \"./form-input.styles.scss\";\n\nconst FormInput = ({\n  handleChange,\n  label,\n  shrink,\n  children,\n  ...otherProps\n}) => (\n  <div className=\"group\">\n    <input className=\"form-input\" onChange={handleChange} {...otherProps} />\n    {label ? (\n      <label\n        className={`${\n          otherProps.value.length ? \"shrink\" : \"\"\n        } form-input-label`}\n      >\n        {label}\n      </label>\n    ) : null}\n    {children}\n  </div>\n);\n\nexport default FormInput;\n","import React from \"react\";\n\nimport \"./spinner.styles.scss\";\n\nconst Spinner = () => (\n  <div className=\"spinner-overlay\">\n    <div className=\"spinner-container\" />\n  </div>\n);\n\nexport default Spinner;\n","import React, { useState } from \"react\";\n\nimport CustomButton from \"../custom-button/custom-button.component\";\n\nimport { useIntl } from \"react-intl\";\nimport QrReader from \"react-qr-reader\";\n\nimport \"../form.styles.scss\";\n\nfunction QrScanner({ setBchState }) {\n  const [bchAddress, setBchAddress] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const intl = useIntl();\n\n  return (\n    <div className=\"form-container\">\n      {bchAddress ? (\n        <div>\n          <p>{intl.formatMessage({ id: \"qrScanner.confirmationMessage\" })}</p>\n          <p>{bchAddress}</p>\n          <div className=\"buttons\">\n            <CustomButton\n              onClick={(e) => {\n                e.preventDefault();\n                setBchState({ bchAddress, showQr: false });\n              }}\n            >\n              {intl.formatMessage({ id: \"qrScanner.submit\" })}\n            </CustomButton>\n            <CustomButton\n              onClick={(e) => {\n                e.preventDefault();\n                setBchAddress(\"\");\n              }}\n            >\n              {intl.formatMessage({ id: \"qrScanner.scanAgain\" })}\n            </CustomButton>\n          </div>\n        </div>\n      ) : (\n        <QrReader\n          delay={300}\n          onError={(error) => setErrorMessage(error)}\n          onScan={(data) => setBchAddress(data)}\n        />\n      )}\n      {errorMessage ? <p className=\"error-message\">{errorMessage}</p> : null}\n    </div>\n  );\n}\n\nexport default QrScanner;\n","import React, { useEffect, useState, useRef } from \"react\";\n\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport FormInput from \"../form-input/form-input.component\";\nimport Spinner from \"../spinner/spinner.component\";\nimport QrScanner from \"../qr-scanner/qr-scanner.component\";\n\nimport { newOrder, getRate } from \"../../api/buy-bch.api\";\n\nimport { useIntl } from \"react-intl\";\n\nimport \"../form.styles.scss\";\nimport \"./new-order.styles.scss\";\n\nfunction NewOrder({ setOrder }) {\n  const [bgn, setBgn] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [bchState, setBchState] = useState({\n    bchAddress: \"\",\n    showQr: false,\n  });\n  const [bch, setBch] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const didMount = useRef(false);\n\n  const intl = useIntl();\n\n  useEffect(() => {\n    if (didMount.current) {\n      const timeOutId = setTimeout(async () => {\n        const bchAmount = await getRate(bgn);\n        setBch(bchAmount);\n      }, 1000);\n      return () => clearTimeout(timeOutId);\n    } else {\n      didMount.current = true;\n    }\n  }, [bgn]);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setLoading(true);\n    const response = await newOrder(bgn, bchState.bchAddress, email);\n    setLoading(false);\n    if (response.order) {\n      localStorage.setItem(\"orderId\", response.order.id);\n      setOrder(response.order);\n    } else if (response.errorId) {\n      setErrorMessage(intl.formatMessage({ id: response.errorId }));\n    }\n  };\n\n  const handleChangeEmail = (event) => {\n    setEmail(event.target.value);\n  };\n\n  const handleChangeBchAddress = (event) => {\n    setBchState({ ...bchState, bchAddress: event.target.value });\n  };\n\n  const handleChangeBgn = (event) => {\n    setBgn(event.target.value);\n  };\n\n  if (loading) {\n    return <Spinner />;\n  }\n\n  if (bchState.showQr) {\n    return <QrScanner setBchState={setBchState} />;\n  }\n\n  return (\n    <div className=\"form-container\">\n      <form onSubmit={handleSubmit}>\n        <FormInput\n          name=\"email\"\n          type=\"email\"\n          handleChange={handleChangeEmail}\n          value={email}\n          label={intl.formatMessage({ id: \"order.email\" })}\n          required\n        />\n        <FormInput\n          name=\"bchAddress\"\n          type=\"bchAddress\"\n          handleChange={handleChangeBchAddress}\n          value={bchState.bchAddress}\n          label={intl.formatMessage({ id: \"order.bchAddress\" })}\n          required\n          children={\n            <div className=\"qr-button-container\">\n              <button\n                className=\"custom-button qr-button\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  setBchState({ ...bchState, showQr: true });\n                }}\n              >\n                {intl.formatMessage({ id: \"order.scanQr\" })}\n              </button>\n            </div>\n          }\n        />\n        <FormInput\n          name=\"bgn\"\n          type=\"number\"\n          step=\"0.001\"\n          handleChange={handleChangeBgn}\n          value={bgn}\n          label={intl.formatMessage({ id: \"order.bgnAmount\" })}\n          required\n          max={process.env.REACT_APP_MAX_BGN_AMOUNT}\n          min={process.env.REACT_APP_MIN_BGN_AMOUNT}\n        />\n        <FormInput\n          name=\"bch\"\n          type=\"text\"\n          value={bch ? bch.toString() : \"\"}\n          label={intl.formatMessage({ id: \"order.bchAmount\" })}\n          readOnly\n        />\n        <div className=\"group\">\n          <input type=\"checkbox\" required name=\"termsConditions\" />\n          <label>\n            {intl.formatMessage(\n              {\n                id: \"order.termAndConditions\",\n              },\n              {\n                a: (url) => (\n                  <a href={process.env.REACT_APP_TERMS_AND_CONDITIONS_URL}>\n                    {url}\n                  </a>\n                ),\n              }\n            )}\n          </label>\n        </div>\n\n        <div className=\"buttons\">\n          <CustomButton type=\"submit\">\n            {intl.formatMessage({ id: \"order.buyButton\" })}\n          </CustomButton>\n        </div>\n      </form>\n      {errorMessage ? <p className=\"error-message\">{errorMessage}</p> : null}\n    </div>\n  );\n}\n\nexport default NewOrder;\n","import React, { useReducer } from \"react\";\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport { useIntl } from \"react-intl\";\n\nimport \"./payment-pending.styles.scss\";\nimport \"../form.styles.scss\";\n\nconst PaymentPending = ({ paymentUrl }) => {\n  const [, forceUpdate] = useReducer((x) => (x === 0 ? x + 1 : x - 1), 0);\n\n  const intl = useIntl();\n\n  const newOrder = () => {\n    localStorage.clear();\n    window.location.reload();\n  };\n\n  const payHere = () => {\n    window.open(paymentUrl, \"_blank\");\n    localStorage.setItem(\"new-order-button-visible\", true);\n    setTimeout(forceUpdate, 1000);\n  };\n\n  return (\n    <div className=\"form-container\">\n      <p>{intl.formatMessage({ id: \"payment.thankYou\" })}</p>\n      <div className=\"buttons\">\n        <CustomButton onClick={payHere}>\n          {intl.formatMessage({ id: \"payment.payHere\" })}\n        </CustomButton>\n        {localStorage.getItem(\"new-order-button-visible\") ? (\n          <CustomButton onClick={newOrder}>\n            {intl.formatMessage({ id: \"payment.newOrder\" })}\n          </CustomButton>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentPending;\n","import React, { useState } from \"react\";\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport FormInput from \"../form-input/form-input.component\";\nimport { verifyPhone, verifyPhoneCode } from \"../../api/buy-bch.api\";\nimport { useIntl } from \"react-intl\";\n\nimport \"../form.styles.scss\";\n\nfunction PhoneVerification({ orderId, setOrder }) {\n  const [phone, setPhone] = useState(\"\");\n  const [validationCode, setValidationCode] = useState(\"\");\n  const [codeSent, setCodeSent] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const intl = useIntl();\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setErrorMessage(\"\");\n    if (codeSent) {\n      const response = await verifyPhoneCode(orderId, phone, validationCode);\n      if (response.order) {\n        setOrder(response.order);\n      } else if (response.errorId) {\n        setErrorMessage(intl.formatMessage({ id: response.errorId }));\n      }\n    } else {\n      const response = await verifyPhone(orderId, phone);\n      if (response) {\n        setErrorMessage(intl.formatMessage({ id: response.errorId }));\n      } else {\n        setCodeSent(!codeSent);\n      }\n    }\n  };\n\n  const handlePhoneChange = (event) => {\n    setPhone(event.target.value);\n  };\n\n  const handleValidationCodeChange = (event) => {\n    setValidationCode(event.target.value);\n  };\n\n  return (\n    <div className=\"form-container\">\n      <form onSubmit={handleSubmit}>\n        <FormInput\n          name=\"phoneNumber\"\n          type=\"text\"\n          handleChange={handlePhoneChange}\n          value={phone}\n          label={intl.formatMessage({ id: \"phone.number\" })}\n          required\n        />\n        {codeSent ? (\n          <FormInput\n            name=\"validationCode\"\n            type=\"text\"\n            handleChange={handleValidationCodeChange}\n            value={validationCode}\n            label={intl.formatMessage({ id: \"phone.smsCode\" })}\n            required\n          />\n        ) : null}\n        <div className=\"buttons\">\n          <CustomButton type=\"submit\">\n            {intl.formatMessage({ id: \"phone.submit\" })}\n          </CustomButton>\n        </div>\n      </form>\n      {errorMessage ? <p className=\"error-message\">{errorMessage}</p> : null}\n    </div>\n  );\n}\n\nexport default PhoneVerification;\n","import React, { useState } from \"react\";\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport FormInput from \"../form-input/form-input.component\";\nimport { verifyPhoto } from \"../../api/buy-bch.api\";\nimport { useIntl } from \"react-intl\";\n\nimport \"../form.styles.scss\";\nimport \"./photo-verification.styles.scss\";\n\nfunction PhotoVerification({\n  orderId,\n  setOrder,\n  photoSuffix,\n  declarationFormUrl,\n}) {\n  const [photo, setPhoto] = useState(null);\n  const [key, setKey] = useState(0);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const intl = useIntl();\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setErrorMessage(\"\");\n    const response = await verifyPhoto(orderId, photo, photoSuffix);\n    if (response.order) {\n      setPhoto(null);\n      setKey(key === 0 ? 1 + key : key - 1);\n      setOrder(response.order);\n    } else if (response.errorId) {\n      setErrorMessage(intl.formatMessage({ id: response.errorId }));\n    }\n  };\n\n  const handleChange = (event) => {\n    if (event.target.files && event.target.files[0]) {\n      let img = event.target.files[0];\n      setPhoto(img);\n    }\n  };\n\n  const photoMessageId = () => {\n    if (photoSuffix === \"id_photo\") {\n      return \"photo.typeId\";\n    } else if (photoSuffix === \"face_photo\") {\n      return \"photo.typeFace\";\n    } else if (photoSuffix === \"declaration_form\") {\n      return \"photo.typeDeclaration\";\n    }\n  };\n\n  return (\n    <div className=\"form-container\">\n      <p>{intl.formatMessage({ id: photoMessageId() })}</p>\n      <form onSubmit={handleSubmit}>\n        <FormInput\n          name=\"photo\"\n          type=\"file\"\n          handleChange={handleChange}\n          required\n          key={key}\n        />\n        {photo ? (\n          <img alt=\"To upload\" src={URL.createObjectURL(photo)} />\n        ) : null}\n        {declarationFormUrl ? (\n          <p>\n            {intl.formatMessage(\n              {\n                id: \"photo.declarationUrl\",\n              },\n              {\n                a: (url) => <a href={declarationFormUrl}>{url}</a>,\n              }\n            )}\n          </p>\n        ) : null}\n        <div className=\"buttons\">\n          <CustomButton type=\"submit\">\n            {intl.formatMessage({ id: \"photo.upload\" })}\n          </CustomButton>\n        </div>\n      </form>\n      {errorMessage ? <p className=\"error-message\">{errorMessage}</p> : null}\n    </div>\n  );\n}\n\nexport default PhotoVerification;\n","import { useEffect, useState } from \"react\";\n\nimport { getOrder } from \"./api/buy-bch.api\";\n\nimport \"./App.scss\";\nimport Header from \"./components/header/header.component\";\nimport NewOrder from \"./components/new-order/new-order.component\";\nimport PaymentPending from \"./components/payment-pending/payment-pending.component\";\nimport PhoneVerification from \"./components/phone-verification/phone-verification.component\";\nimport PhotoVerification from \"./components/photo-verification/photo-verification.component\";\n\nfunction App() {\n  const [order, setOrder] = useState({});\n\n  useEffect(() => {\n    const orderId = localStorage.getItem(\"orderId\");\n    if (orderId) {\n      async function fetchOrder() {\n        const retrievedOrder = await getOrder(orderId);\n        console.log(retrievedOrder);\n        setOrder(retrievedOrder);\n      }\n\n      fetchOrder();\n    }\n  }, []);\n\n  const renderSwitch = () => {\n    if (order[\"status\"] === \"pending_payment\") {\n      return <PaymentPending paymentUrl={order[\"payment_url\"]} />;\n    }\n\n    if (order[\"status\"] === \"pending_id\") {\n      if (order[\"id_pending\"] === \"phone\") {\n        return <PhoneVerification orderId={order[\"id\"]} setOrder={setOrder} />;\n      } else if (\n        order[\"id_pending\"] === \"id_photo\" ||\n        order[\"id_pending\"] === \"face_photo\" ||\n        order[\"id_pending\"] === \"declaration_form\"\n      ) {\n        return (\n          <PhotoVerification\n            orderId={order[\"id\"]}\n            setOrder={setOrder}\n            photoSuffix={order[\"id_pending\"]}\n            declarationFormUrl={order[\"id_ext_url\"]}\n          />\n        );\n      }\n    }\n    return <NewOrder setOrder={setOrder} />;\n  };\n\n  return (\n    <div className=\"App\">\n      <Header />\n      {renderSwitch()}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport IntlWrapper from \"./components/intl-wrapper/intl-wrapper.component\";\n\nReactDOM.render(\n  <IntlWrapper>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </IntlWrapper>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}